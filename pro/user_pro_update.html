<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修改用户</title>
    <script>
        function upd() {

            var $email = email.value;
            var $phone = phone.value;
            var $user_name = user_name.value;
            var $gender = 1;
            if (!$uid) {
                alert("编号不能为空");
                return;
            }
            if (!$email) {
                alert("邮箱不能为空");
                return;
            }
            if (!$phone) {
                alert("电话不能为空");
                return;
            }
            if (!$user_name) {
                alert("姓名不能为空");
                return;
            }
            if (!$gender) {
                alert("性别不能为空");
                return;
            }
            if (man.checked = true) {
                man.value = 1;
            } else if (woman.checked == true) {
                woman.value = 0;
            } else {
                un.value = -1;
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var str = xhr.responseText;
                    if (str == 1) {
                        //d1.innerHTML = "修改成功";
                        alert("修改成功!");
                    }
                    else {
                        //d1.innerHTML = "修改失败";
                        alert("修改失败！");
                    }
                }
            }
            xhr.open("put", "/pro/v1/update", true);
            var formdata = "uid=" + $uid + "&email=" + $email + "&phone=" + $phone + "&user_name=" + $user_name + "&gender=" + $gender;
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send(formdata);

        }
    </script>
</head>

<body>
    用户名:
    <input type="text" id="uname">
    <br> 邮箱:
    <input type="text" id="email">
    <br> 电话:
    <input type="text" id="phone">
    <br> 姓名:
    <input type="text" id="user_name">
    <br> 性别:
    <input type="radio" checked id="man" name="gender" value="1">男
    <input type="radio" id="woman" name="gender" value="0">女
    <input type="radio" id="un" name="gender" value="-1">保密
    <div id="d1"></div>
    <br>

    <button onclick="upd()">修改</button>
</body>

</html>